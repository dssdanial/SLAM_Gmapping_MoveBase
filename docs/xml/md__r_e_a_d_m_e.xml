<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.17">
  <compounddef id="md__r_e_a_d_m_e" kind="page">
    <compoundname>md_README</compoundname>
    <title># RT1 final project: SLAM_gmapping_movebase</title>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>A software architecture for the control of the robot in the environment. The software relys on the move_base and gmapping packages for localizing the robot and plan the motion.</para>
<para>In this project, the software architecture should be able to get the user request, and let the robot execute one of the following behaviors (depending on the user’s input): <verbatim>  1-  autonomously reach a x,y coordinate inserted by the user
  2-  let the user drive the robot with the keyboard
  3-  let the user drive the robot assisting them to avoid collisions
</verbatim></para>
<para><itemizedlist>
<listitem><para>The Robot can be obsereved in both Rviz and Gazebo environments as follows. </para>
</listitem></itemizedlist>
</para>
<para><image type="html" name="map_01.png" inline="yes"></image>
 </para>
<para></para>
<para><image type="html" name="map_02_rviz.png" inline="yes"></image>
 </para>
<para>This represents the point of view from Rviz. Rviz is a 3D visualization tool for ROS applications. It offers a view of the robot model, acquires sensor information from the robot sensors, and reproduces the acquired data. It can display data from video cameras, lasers, 3D and 2D devices, including images and point clouds. To obtain this result the robot must have explored all the surroundings since with the gmapping algorithm we do not have a totale knowledge of the environment, whereas with a pre-existing map we do.</para>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md0">
<title>## How to Install and run</title>
<para>At first, some packages are required to be installed, if they aren&apos;t already installed,it is possible to setup them by the following commands.</para>
<para><itemizedlist>
<listitem><para>Install xterm: <programlisting><codeline><highlight class="normal">$<sp/>sudo<sp/>apt<sp/>install<sp/>xterm</highlight></codeline>
</programlisting></para>
</listitem><listitem><para>Using the SLAM-Gmapping package: <programlisting><codeline><highlight class="normal">$<sp/>git<sp/>clone<sp/>https://github.com/CarmineD8/slam_gmapping.git</highlight></codeline>
</programlisting></para>
</listitem><listitem><para>using the Navigation package: <programlisting><codeline><highlight class="normal">$<sp/>sudo<sp/>apt-get<sp/>install<sp/>ros-&lt;your_ros_distro&gt;-navigation</highlight></codeline>
</programlisting></para>
</listitem><listitem><para>Install teleop-twist-keyboard package: <programlisting><codeline><highlight class="normal">$<sp/>sudo<sp/>apt-get<sp/>install<sp/>ros-&lt;your_ros_distro&gt;-teleop-twist-keyboard</highlight></codeline>
</programlisting></para>
</listitem></itemizedlist>
</para>
<para>After installing the required packages, it is time to run the simulation. Concequently, a launch file is porvided here as follows. <programlisting><codeline><highlight class="normal">$<sp/>roslaunch<sp/>RTassignment3<sp/>main.launch</highlight></codeline>
</programlisting></para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md1">
<title>Introduction</title>
<para><itemizedlist>
<listitem><para>Regarding the first goal, the <computeroutput>move_base</computeroutput> pakage requires goal to be sent to the topic <computeroutput>move_base/goal</computeroutput>, by sending a message of type <computeroutput>move_base_msgs/MoveBaseActionGoal</computeroutput>.</para>
</listitem><listitem><para>Regarding the goals 2) and 3), it should rely on the <computeroutput>teleop_twist_keyboard</computeroutput>, however, in case 3), the cmd_vel may need to be corrected when the user is going to crash into obstacles. Carefully consider the architecture of the system.</para>
</listitem><listitem><para>Concerning the goal 3), the robot should not go forward if there is an obstacle in the front, also should not turn left/right if there are obstacles on the left/right.</para>
</listitem></itemizedlist>
</para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md2">
<title>Interface Node</title>
<para>The purpose of this node is showing an interface in which the user can choose different modes, reset the simulation or quit the execution of the program. When an input is given, the node runs the correct command to launch the related node.</para>
<para>The interface is simply designed as a list of commands as follows:</para>
<para><image type="html" name="interface.png" inline="yes"></image>
 </para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md3">
<title>(I) Autonomous XY-Position Node</title>
<para>Once a x-y position receieved by user, this node drives the robot to the desired position in the environment. First of all the node requires from the user the <computeroutput>x</computeroutput> and <computeroutput>y</computeroutput> position of the goal, then a message of type <computeroutput>move_base_msgs/MoveBaseActionGoal</computeroutput> is generated and published in the <computeroutput>/move_base/goal</computeroutput> topic. Every goal is tracked by the node with its <computeroutput>id</computeroutput>, that is randomly generated inside the node itself.</para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md4">
<title>Nodes struscture</title>
<para><image type="html" name="mode01.jpg" inline="yes"></image>
 </para>
<para>After establishing the position, the user can at any time cancel the goal (pressing the <computeroutput>q</computeroutput> key) and quit the execurtion (pressing the <computeroutput>s</computeroutput> key). If one of the above keys is pressed, a message of type <computeroutput>actionlib_msgs/GoalID</computeroutput> is generated and then published in the <computeroutput>/move_base/cancel</computeroutput> topic to cancel the goal.</para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md5">
<title>video</title>
<para>The result of the **_first_** task is shown as the following video:</para>
<para><ulink url="https://user-images.githubusercontent.com/32397445/182872817-f4ccb08b-4d68-4531-80b7-29de31634bc2.mp4">https://user-images.githubusercontent.com/32397445/182872817-f4ccb08b-4d68-4531-80b7-29de31634bc2.mp4</ulink></para>
<para>In order to check wheather the robot has reached the goal or not, a <computeroutput>/move_base/status</computeroutput> message handler is implemented. It checks the meassages published on the previously mentioned topic. In particular, when the robot stops, the status code becomes <computeroutput>3</computeroutput> if the robot has reached the goal position, otherwise the status code becomes <computeroutput>4</computeroutput> if the robot can not reach the given position.</para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md6">
<title>(II) Manual Drive- &lt;em&gt;without&lt;/em&gt; Obstacle Avoidance assistant</title>
<para>This node aims to give the user the possibility of moving the robot in the environment using the keyboard. In order to manage the robot&apos;s movement in the environment four parameters are considred, two used for the velocity values (both linear and angular velocity) and two used for the directions. Each specific key modifies the above mentioned variables to drive the robot through the maze. Once the velocity and the direction has been modified new velocities are published in the <computeroutput>/cmd_vel</computeroutput> topic.</para>
<para>An interface has been considered as a list of the commands to move the robot and increase/decrease velocities as follows:</para>
<para><image type="html" name="keyboard.png" inline="yes"></image>
 </para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md7">
<title>Nodes struscture</title>
<para><image type="html" name="mode02.jpg" inline="yes"></image>
 </para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md8">
<title>Video</title>
<para>The result of the **_second_** task is shown as the following video:</para>
<para><ulink url="https://user-images.githubusercontent.com/32397445/182872919-e427823f-907b-438d-9582-4881dcccf7d8.mp4">https://user-images.githubusercontent.com/32397445/182872919-e427823f-907b-438d-9582-4881dcccf7d8.mp4</ulink></para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md9">
<title>(III) Manual Drive- &lt;em&gt;with&lt;/em&gt; Obstacle Avoidance assistant</title>
<para>This is the last node developed, basically it aims to give the user the possibility to drive the robot in the environment using the keyboard, but in this case it is also necessary to provide obstacle avoidance autonomously. Since the goal is partially similar to what was done with the previous node, part of the code has been re-used for this node. To manage obstacle avoidance the robot laser scanner is used,and the node subscribes from the <computeroutput>/scan</computeroutput> topic. This topic provide a <computeroutput>ranges array</computeroutput> composed of 720 elements. The ranges array is filled with the distance of the obstacles in the <computeroutput>180°</computeroutput> field of view of the robot. It is possible to divide the array in three parts (robot&apos;s left right and front) and check the closest obstacle in each section, then if the robot will be close to an obstacle it will be properly rotated.</para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md10">
<title>Nodes struscture</title>
<para><image type="html" name="mode03.jpg" inline="yes"></image>
 </para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md11">
<title>Video</title>
<para>The result of the **_third_** task is shown as the following video:</para>
<para><ulink url="https://user-images.githubusercontent.com/32397445/182872987-ba6ce54d-a143-4cc3-a866-5fc8f35cb515.mp4">https://user-images.githubusercontent.com/32397445/182872987-ba6ce54d-a143-4cc3-a866-5fc8f35cb515.mp4</ulink></para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md12">
<title>Pseudo code</title>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md13">
<title>control of the robot</title>
<para><programlisting><codeline><highlight class="normal">listen<sp/>for<sp/>UI<sp/>node&apos;s<sp/>commands</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/>if<sp/>autonomous<sp/>drive</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>receive<sp/>coordinates</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>start<sp/>driving<sp/>action<sp/>with<sp/>coordinates</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/>elseif<sp/>manual<sp/>drive</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>redirect<sp/>teleop_twist_keyboard<sp/>node<sp/>to<sp/>cmd_vel<sp/>topic</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/>elseif<sp/>assisted<sp/>drive</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>run<sp/>collision<sp/>avoidance<sp/>on<sp/>teleop_twist_keyboard&apos;s<sp/>commands</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/>send<sp/>filtered<sp/>commands<sp/>to<sp/>cmd_vel</highlight></codeline>
<codeline></codeline>
<codeline><highlight class="normal"><sp/>send<sp/>info<sp/>to<sp/>Interface<sp/>node</highlight></codeline>
</programlisting></para>
</sect1>
<sect1 id="md__r_e_a_d_m_e_1autotoc_md14">
<title>Coclusion and possible improvments</title>
<para>All proposed algorithms are executed correctly and the robot completed tasks as well. Results are satisfying, however, some improvements can be achieved.<itemizedlist>
<listitem><para>reaching a desired point seems taking some delays, so, this could be modified by tuning parameters.</para>
</listitem><listitem><para>A queue could be implemented where goals are reached sequentially.</para>
</listitem><listitem><para>When the map of the environment is completed, the robot is not able to understand the priori points whether it is reachable or not, which could be improved in further developments. </para>
</listitem></itemizedlist>
</para>
</sect1>
    </detaileddescription>
  </compounddef>
</doxygen>
