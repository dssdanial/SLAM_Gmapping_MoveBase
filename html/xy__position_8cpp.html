<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SLAM_gmapping_movebase: src/xy_position.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SLAM_gmapping_movebase
   &#160;<span id="projectnumber">1</span>
   </div>
   <div id="projectbrief">A software architecture for the control of the robot in the environment.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">xy_position.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Navigation node for driving a robot to a specified goal.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ros/ros.h&quot;</code><br />
<code>#include &quot;move_base_msgs/MoveBaseActionGoal.h&quot;</code><br />
<code>#include &quot;actionlib_msgs/GoalStatusArray.h&quot;</code><br />
<code>#include &quot;actionlib_msgs/GoalID.h&quot;</code><br />
<code>#include &lt;time.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for xy_position.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="xy__position_8cpp__incl.png" border="0" usemap="#src_2xy__position_8cpp" alt=""/></div>
<map name="src_2xy__position_8cpp" id="src_2xy__position_8cpp">
<area shape="rect" title="Navigation node for driving a robot to a specified goal." alt="" coords="409,5,555,32"/>
<area shape="rect" title=" " alt="" coords="5,87,84,114"/>
<area shape="rect" title=" " alt="" coords="108,80,360,121"/>
<area shape="rect" title=" " alt="" coords="385,80,579,121"/>
<area shape="rect" title=" " alt="" coords="604,87,784,114"/>
<area shape="rect" title=" " alt="" coords="809,87,873,114"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a979c1eec3a680dc9742ca8f3a498bf5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xy__position_8cpp.html#a979c1eec3a680dc9742ca8f3a498bf5f">get_coordinates</a> ()</td></tr>
<tr class="memdesc:a979c1eec3a680dc9742ca8f3a498bf5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get goal coordinates from user.  <a href="xy__position_8cpp.html#a979c1eec3a680dc9742ca8f3a498bf5f">More...</a><br /></td></tr>
<tr class="separator:a979c1eec3a680dc9742ca8f3a498bf5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab859e879694e6127351224cfac874342"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xy__position_8cpp.html#ab859e879694e6127351224cfac874342">Handler</a> (const actionlib_msgs::GoalStatusArray::ConstPtr &amp;msg)</td></tr>
<tr class="memdesc:ab859e879694e6127351224cfac874342"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the robot's goal status.  <a href="xy__position_8cpp.html#ab859e879694e6127351224cfac874342">More...</a><br /></td></tr>
<tr class="separator:ab859e879694e6127351224cfac874342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfecdcc2c8ebd81159619cb8bd8d180e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xy__position_8cpp.html#acfecdcc2c8ebd81159619cb8bd8d180e">detect_input</a> ()</td></tr>
<tr class="memdesc:acfecdcc2c8ebd81159619cb8bd8d180e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get user input to determine course of action.  <a href="xy__position_8cpp.html#acfecdcc2c8ebd81159619cb8bd8d180e">More...</a><br /></td></tr>
<tr class="separator:acfecdcc2c8ebd81159619cb8bd8d180e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac202af5a188c6fd910fa5a0459f49a68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xy__position_8cpp.html#ac202af5a188c6fd910fa5a0459f49a68">delete_goal</a> (int must_continue)</td></tr>
<tr class="memdesc:ac202af5a188c6fd910fa5a0459f49a68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the current goal.  <a href="xy__position_8cpp.html#ac202af5a188c6fd910fa5a0459f49a68">More...</a><br /></td></tr>
<tr class="separator:ac202af5a188c6fd910fa5a0459f49a68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xy__position_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function of the program.  <a href="xy__position_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">More...</a><br /></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae057aae7fbba2a4cef62321020305295"><td class="memItemLeft" align="right" valign="top"><a id="ae057aae7fbba2a4cef62321020305295"></a>
ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xy__position_8cpp.html#ae057aae7fbba2a4cef62321020305295">pub_goal</a></td></tr>
<tr class="memdesc:ae057aae7fbba2a4cef62321020305295"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global publisher for the goal position. <br /></td></tr>
<tr class="separator:ae057aae7fbba2a4cef62321020305295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33cbe548b1e0f6b08bbe754f53af458c"><td class="memItemLeft" align="right" valign="top"><a id="a33cbe548b1e0f6b08bbe754f53af458c"></a>
ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xy__position_8cpp.html#a33cbe548b1e0f6b08bbe754f53af458c">pub_cancel</a></td></tr>
<tr class="memdesc:a33cbe548b1e0f6b08bbe754f53af458c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global publisher to cancel the goal. <br /></td></tr>
<tr class="separator:a33cbe548b1e0f6b08bbe754f53af458c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22ff3f8747e9f68ad42bddad8e86e872"><td class="memItemLeft" align="right" valign="top"><a id="a22ff3f8747e9f68ad42bddad8e86e872"></a>
ros::Subscriber&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xy__position_8cpp.html#a22ff3f8747e9f68ad42bddad8e86e872">subscriber</a></td></tr>
<tr class="memdesc:a22ff3f8747e9f68ad42bddad8e86e872"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global subscriber for robot status. <br /></td></tr>
<tr class="separator:a22ff3f8747e9f68ad42bddad8e86e872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0da36b2558901e21e7a30f6c227a45e"><td class="memItemLeft" align="right" valign="top"><a id="ad0da36b2558901e21e7a30f6c227a45e"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>x</b></td></tr>
<tr class="separator:ad0da36b2558901e21e7a30f6c227a45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4f0d3eebc3c443f9be81bf48561a217"><td class="memItemLeft" align="right" valign="top"><a id="aa4f0d3eebc3c443f9be81bf48561a217"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xy__position_8cpp.html#aa4f0d3eebc3c443f9be81bf48561a217">y</a></td></tr>
<tr class="memdesc:aa4f0d3eebc3c443f9be81bf48561a217"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variables for goal coordinates. <br /></td></tr>
<tr class="separator:aa4f0d3eebc3c443f9be81bf48561a217"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7441ef0865bcb3db9b8064dd7375c1ea"><td class="memItemLeft" align="right" valign="top"><a id="a7441ef0865bcb3db9b8064dd7375c1ea"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xy__position_8cpp.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a></td></tr>
<tr class="memdesc:a7441ef0865bcb3db9b8064dd7375c1ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable for goal id. <br /></td></tr>
<tr class="separator:a7441ef0865bcb3db9b8064dd7375c1ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a277a26d89f87198b128da14ee46d39a7"><td class="memItemLeft" align="right" valign="top"><a id="a277a26d89f87198b128da14ee46d39a7"></a>
move_base_msgs::MoveBaseActionGoal&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xy__position_8cpp.html#a277a26d89f87198b128da14ee46d39a7">goal</a></td></tr>
<tr class="memdesc:a277a26d89f87198b128da14ee46d39a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global variable for overall goal. <br /></td></tr>
<tr class="separator:a277a26d89f87198b128da14ee46d39a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a910adc6e2561e7bb6644c09a3f851977"><td class="memItemLeft" align="right" valign="top"><a id="a910adc6e2561e7bb6644c09a3f851977"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xy__position_8cpp.html#a910adc6e2561e7bb6644c09a3f851977">flag_for_goal</a></td></tr>
<tr class="memdesc:a910adc6e2561e7bb6644c09a3f851977"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global flag to detect the user input during goal navigation. <br /></td></tr>
<tr class="separator:a910adc6e2561e7bb6644c09a3f851977"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Navigation node for driving a robot to a specified goal. </p>
<p>This file contains the core code for a ROS node that drives a robot to a specified goal location. The goal location is provided by the user via the console. This node subscribes to the /move_base/status topic to get the status of the robot, and publishes to the /move_base/goal and /move_base/cancel topics to set and cancel the goal position respectively. </p><dl class="section author"><dt>Author</dt><dd>Danial Sabzevari (<a href="#" onclick="location.href='mai'+'lto:'+'s52'+'17'+'544'+'@s'+'tud'+'en'+'ti.'+'un'+'ige'+'.i'+'t'; return false;">s5217<span style="display: none;">.nosp@m.</span>544@<span style="display: none;">.nosp@m.</span>stude<span style="display: none;">.nosp@m.</span>nti.<span style="display: none;">.nosp@m.</span>unige<span style="display: none;">.nosp@m.</span>.it</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>01/06/2023 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ac202af5a188c6fd910fa5a0459f49a68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac202af5a188c6fd910fa5a0459f49a68">&#9670;&nbsp;</a></span>delete_goal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delete_goal </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>must_continue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete the current goal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">must_continue</td><td>Determines if navigation should continue after deletion.</td></tr>
  </table>
  </dd>
</dl>
<p>This function cancels the current goal based on user input and publishes a cancellation message. Depending on the must_continue parameter, it either prompts the user to set a new goal, or shuts down the program. </p>

</div>
</div>
<a id="acfecdcc2c8ebd81159619cb8bd8d180e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfecdcc2c8ebd81159619cb8bd8d180e">&#9670;&nbsp;</a></span>detect_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void detect_input </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get user input to determine course of action. </p>
<p>This function detects user input to determine if the user wants to set a new goal, stop the navigation towards the current goal, or exit the program. It interacts with the <a class="el" href="xy__position_8cpp.html#ac202af5a188c6fd910fa5a0459f49a68" title="Delete the current goal.">delete_goal()</a> function as necessary based on user input. </p>

</div>
</div>
<a id="a979c1eec3a680dc9742ca8f3a498bf5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a979c1eec3a680dc9742ca8f3a498bf5f">&#9670;&nbsp;</a></span>get_coordinates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_coordinates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get goal coordinates from user. </p>
<p>This function prompts the user for the x and y coordinates of the desired goal. It then constructs a goal message with these coordinates and a randomly generated id, and publishes this message. The goal status is tracked throughout the execution. </p>

</div>
</div>
<a id="ab859e879694e6127351224cfac874342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab859e879694e6127351224cfac874342">&#9670;&nbsp;</a></span>Handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Handler </td>
          <td>(</td>
          <td class="paramtype">const actionlib_msgs::GoalStatusArray::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle the robot's goal status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>ConstPtr to GoalStatusArray message.</td></tr>
  </table>
  </dd>
</dl>
<p>This function handles the status of the goal. It checks if the goal has been reached or not and updates the user accordingly. If the goal is not reached, it prompts the user to set a new goal. </p>

</div>
</div>
<a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function of the program. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>An integer argument count of the command line arguments. </td></tr>
    <tr><td class="paramname">argv</td><td>An argument vector of the command line arguments. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An integer 0 upon exit success.</dd></dl>
<p>This function initializes the ROS node, sets up the necessary publishers and subscribers, and prompts the user to set the first goal. It then spins the node and handles user input and goal statuses as they come in. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
